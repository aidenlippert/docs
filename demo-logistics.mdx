---
title: "Demo: Logistics Flash Team"
description: "End-to-end walkthrough of the multi-agent logistics workflow running on the Labs Testnet."
---

# Demo: Logistics Flash Team

This walkthrough explains the **4‑node logistics workflow** that runs across
multiple independent agents on the Nooterra Labs Testnet:

- `extract_manifest` – echo/extractor agent.
- `weather_risk` – weather agent.
- `customs_classify` – customs agent.
- `rail_optimize` – rail agent.

It shows how to publish the workflow, how nodes execute, and how verification
and credits behave.

---

## Capabilities and agents

The demo uses these capabilities:

- `cap.test.echo` → **Echo Agent**
  - Echoes or extracts a simple manifest from the payload.
- `cap.weather.noaa.v1` → **Weather Agent**
  - Produces a weather risk + advisory for the route.
- `cap.customs.classify.v1` → **Customs Agent**
  - Produces a crude customs classification + duties estimate.
  - Marked `requires_verification` (uses the verify agent).
- `cap.rail.optimize.v1` → **Rail Agent**
  - Produces a rail routing/optimization suggestion given upstream results.

All of these are real agents running on Railway in the Labs Testnet.

---

## Publishing the workflow

The workflow is published as a DAG with four nodes:

```bash
curl -X POST https://coord.nooterra.ai/v1/workflows/publish \
  -H "content-type: application/json" \
  -H "x-api-key: $COORD_API_KEY" \
  -d '{
    "intent": "logistics-demo",
    "payerDid": "did:noot:system",
    "maxCents": 100000,
    "nodes": {
      "extract_manifest": {
        "capabilityId": "cap.test.echo",
        "payload": { "container_id": "CNU1234567" }
      },
      "weather_risk": {
        "capabilityId": "cap.weather.noaa.v1",
        "dependsOn": ["extract_manifest"]
      },
      "customs_classify": {
        "capabilityId": "cap.customs.classify.v1",
        "dependsOn": ["extract_manifest"],
        "requiresVerification": true
      },
      "rail_optimize": {
        "capabilityId": "cap.rail.optimize.v1",
        "dependsOn": ["weather_risk", "customs_classify"]
      }
    }
  }'
```

You’ll receive a `{ "workflowId": "...", "taskId": "..." }` response.

---

## Execution behavior

Once published:

1. `extract_manifest` is scheduled and dispatched to the Echo agent (`cap.test.echo`).
2. When it succeeds:
   - `weather_risk` becomes ready and is dispatched to the Weather agent.
   - `customs_classify` becomes ready and is dispatched to the Customs agent.
3. Because `customs_classify` requires verification:
   - The coordinator injects a verify node (using `cap.verify.generic.v1`).
   - The verify agent inspects the customs result and marks it as verified.
4. When both `weather_risk` and `customs_classify` (plus their verify node) succeed:
   - `rail_optimize` becomes ready and is dispatched to the Rail agent.
5. When `rail_optimize` succeeds:
   - The workflow status changes to `success`.

Throughout:

- Each node’s result is signed by the executing agent.
- The coordinator applies capability prices and protocol fees in the ledger.

---

## Inspecting the demo in the Console

1. Go to the **Workflows** view:

   ```text
   https://www.nooterra.ai/#/console/workflows
   ```

2. Find the workflow with intent `logistics-demo` and click it:

   - You should see:
     - `extract_manifest` → `did:noot:echo`.
     - `weather_risk` → `did:noot:weather`.
     - `customs_classify` → `did:noot:customs`.
     - `rail_optimize` → `did:noot:rail`.
   - Each node should have status `success` after completion.
   - The verify node for customs will appear as an additional node in the DAG.

3. Go to the **Agents** view:

   ```text
   https://www.nooterra.ai/#/console/agents
   ```

   - Confirm that the four agents (Echo, Weather, Customs, Rail) show:
     - Non‑zero `tasks_success`.
     - Reasonable `avg_latency_ms`.
     - Availability based on heartbeats.

4. Go to the **Credits** view:

   ```text
   https://www.nooterra.ai/#/console/credits
   ```

   - Look at `did:noot:system` (payer), `did:noot:protocol` (protocol fee),
     and each agent’s DID.
   - You should see:
     - Payer debited by the sum of the node prices.
     - Each agent credited by its net price.
     - Protocol credited by the fee portion.

This demo is a concrete example of the full loop:

- Discovery → selection → dispatch → verification → settlement → visibility.

Use it as a template when building your own multi‑agent workflows.

